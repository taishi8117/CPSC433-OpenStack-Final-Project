package object;

import java.util.HashMap;

import project.Controller;

public class Network {
	enum NetworkState {
		UP,
		DOWN
	}

	public long networkID;
	public long tenantID;
	public NetworkState state;
	public String networkName;
	
	public Controller controller;
	
	// maps subnetID to Subnet instance
	private HashMap<Long, Subnet> subnetMap;	
	
	/**
	 * Create Network instance. Should be called when create_network() API is called.
	 */
	public Network(Controller controller, String networkName) {
		// TODO Auto-generated constructor stub
		this.controller = controller;
		this.tenantID = controller.registerNewTenant(this);
		//TODO need to assign unique network ID?
		this.networkID = 0;
		this.networkName = networkName;
		this.state = NetworkState.UP;
		this.subnetMap = new HashMap<Long, Subnet>();
	}
	
	/**
	 * Registers a new subnet to this network
	 * @param subnet
	 * @return subnet ID that was registered
	 */
	public long registerNewSubnet(Subnet subnet) {
		long tenantID;
		
		// randomly generate tenantID until it finds a new one
		do {
			tenantID = randomGen.nextLong();
		} while (tenantMap.containsKey(tenantID));
		
		tenantMap.put(tenantID, network);
		
		return tenantID;
		
	}
	

}
